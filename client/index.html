<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Image Ranking</title>
    </head>
    <body>
        Hello!
        <form enctype="multipart/form-data" method="POST" action="/api/upload">
            <input type="file" name="uploadfile" accept="image/*" id="uploadfile" />
            <input type="submit" value="Upload" />
        </form>

        <output id="preview"></output>

        <script type="text/javascript">
          const input = document.querySelector('#uploadfile');
          const preview = document.querySelector('#preview');

          input.addEventListener('change', function (e) {
            preview.innerHTML = '';
            if (this.files) {
              const files = input.files.length;

              for (let i = 0; i < files; i++) {
                const reader = new FileReader();

                reader.onload = function (e) {
                  const img = new Image();

                  img.src = e.target.result;
                  preview.appendChild(img);
                };

                reader.readAsDataURL(input.files[i]);
              }
            }
          }, false);
        </script>
    </body>
</html>
